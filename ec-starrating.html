<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="../paper-styles/color.html">

<!--
`ec-starrating`
Show stars for ratings.

@demo demo/index.html 
-->

<dom-module id="ec-starrating">
  <template>
    <style>
      :host {
        display: block;
      }
      iron-icon.star {
        --iron-icon-width: 16px;
        --iron-icon-height: 16px;
        color: var(--paper-amber-500);
      }
      iron-icon.star-blah { 
        color: var(--paper-grey-300); 
      }
    </style>
    <template is="dom-repeat" items="[[stars]]" as="star">
      <iron-icon class$="[[star.xlass]]" icon="[[star.icon]]"></iron-icon>
    </template>
  </template>

  <script>
    class ECStarrating extends Polymer.Element {
        static get is () { return "ec-starrating"; }
        static get properties() {
            return {
                range: {
                    type: Number,
                    value: 5,
                },
                rating: {
                    type: Number,
                    value: 0,
                },
                stars: {
                    computed: '_computeStars(range, rating)'
                }
            };
        }
        _computeStars(range, rating) {
            var stars = [];
            var fRating = Math.floor(rating);
            var cRating = Math.ceil(rating);
            for (var i = 1; i <= Math.ceil(range); i++) {
                stars.push({
                    icon: i <= fRating || i > cRating ? "star" : "star-half",
                    xlass: i <= cRating ? 'star' : 'star star-blah',
                });
            }
            return stars;
        }
    }
    window.customElements.define(ECStarrating.is, ECStarrating);
  </script>
</dom-module>
